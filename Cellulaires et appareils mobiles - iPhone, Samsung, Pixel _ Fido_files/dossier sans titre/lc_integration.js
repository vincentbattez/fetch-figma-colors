!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=9)}([function(t,e,n){n(2),t.exports=self.fetch.bind(self)},function(t,e,n){(function(e,n){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.5+7f2b526d
 */var r;r=function(){"use strict";function t(t){return"function"==typeof t}var r=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=0,i=void 0,s=void 0,a=function(t,e){p[o]=t,p[o+1]=e,2===(o+=2)&&(s?s(y):w())},u="undefined"!=typeof window?window:void 0,c=u||{},f=c.MutationObserver||c.WebKitMutationObserver,d="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),l="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function h(){var t=setTimeout;return function(){return t(y,1)}}var p=new Array(1e3);function y(){for(var t=0;t<o;t+=2){(0,p[t])(p[t+1]),p[t]=void 0,p[t+1]=void 0}o=0}var m,v,b,g,w=void 0;function _(t,e){var n=this,r=new this.constructor(A);void 0===r[E]&&M(r);var o=n._state;if(o){var i=arguments[o-1];a(function(){return N(o,r,i,n._result)})}else F(n,r,t,e);return r}function T(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(A);return S(e,t),e}d?w=function(){return e.nextTick(y)}:f?(v=0,b=new f(y),g=document.createTextNode(""),b.observe(g,{characterData:!0}),w=function(){g.data=v=++v%2}):l?((m=new MessageChannel).port1.onmessage=y,w=function(){return m.port2.postMessage(0)}):w=void 0===u?function(){try{var t=Function("return this")().require("vertx");return void 0!==(i=t.runOnLoop||t.runOnContext)?function(){i(y)}:h()}catch(t){return h()}}():h();var E=Math.random().toString(36).substring(2);function A(){}var I=void 0,O=1,x=2,j={error:null};function B(t){try{return t.then}catch(t){return j.error=t,j}}function P(e,n,r){n.constructor===e.constructor&&r===_&&n.constructor.resolve===T?function(t,e){e._state===O?L(t,e._result):e._state===x?D(t,e._result):F(e,void 0,function(e){return S(t,e)},function(e){return D(t,e)})}(e,n):r===j?(D(e,j.error),j.error=null):void 0===r?L(e,n):t(r)?function(t,e,n){a(function(t){var r=!1,o=function(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}(n,e,function(n){r||(r=!0,e!==n?S(t,n):L(t,n))},function(e){r||(r=!0,D(t,e))},t._label);!r&&o&&(r=!0,D(t,o))},t)}(e,n,r):L(e,n)}function S(t,e){var n,r;t===e?D(t,new TypeError("You cannot resolve a promise with itself")):(r=typeof(n=e),null===n||"object"!==r&&"function"!==r?L(t,e):P(t,e,B(e)))}function C(t){t._onerror&&t._onerror(t._result),U(t)}function L(t,e){t._state===I&&(t._result=e,t._state=O,0!==t._subscribers.length&&a(U,t))}function D(t,e){t._state===I&&(t._state=x,t._result=e,a(C,t))}function F(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+O]=n,o[i+x]=r,0===i&&t._state&&a(U,t)}function U(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,o=void 0,i=t._result,s=0;s<e.length;s+=3)r=e[s],o=e[s+n],r?N(n,r,o,i):o(i);t._subscribers.length=0}}function N(e,n,r,o){var i=t(r),s=void 0,a=void 0,u=void 0,c=void 0;if(i){if((s=function(t,e){try{return t(e)}catch(t){return j.error=t,j}}(r,o))===j?(c=!0,a=s.error,s.error=null):u=!0,n===s)return void D(n,new TypeError("A promises callback cannot return that same promise."))}else s=o,u=!0;n._state!==I||(i&&u?S(n,s):c?D(n,a):e===O?L(n,s):e===x&&D(n,s))}var q=0;function M(t){t[E]=q++,t._state=void 0,t._result=void 0,t._subscribers=[]}var k=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(A),this.promise[E]||M(this.promise),r(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?L(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&L(this.promise,this._result))):D(this.promise,new Error("Array Methods must be provided an Array"))}return t.prototype._enumerate=function(t){for(var e=0;this._state===I&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===T){var o=B(t);if(o===_&&t._state!==I)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===V){var i=new n(A);P(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},t.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===I&&(this._remaining--,t===x?D(r,n):this._result[e]=n),0===this._remaining&&L(r,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;F(t,void 0,function(t){return n._settledAt(O,e,t)},function(t){return n._settledAt(x,e,t)})},t}(),V=function(){function e(t){this[E]=q++,this._result=this._state=void 0,this._subscribers=[],A!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof e?function(t,e){try{e(function(e){S(t,e)},function(e){D(t,e)})}catch(e){D(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(e){var n=this.constructor;return t(e)?this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})}):this.then(e,e)},e}();return V.prototype.then=_,V.all=function(t){return new k(this,t).promise},V.race=function(t){var e=this;return r(t)?new e(function(n,r){for(var o=t.length,i=0;i<o;i++)e.resolve(t[i]).then(n,r)}):new e(function(t,e){return e(new TypeError("You must pass an array to race."))})},V.resolve=T,V.reject=function(t){var e=new this(A);return D(e,t),e},V._setScheduler=function(t){s=t},V._setAsap=function(t){a=t},V._asap=a,V.polyfill=function(){var t=void 0;if(void 0!==n)t=n;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var r=null;try{r=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===r&&!e.cast)return}t.Promise=V},V.Promise=V,V},t.exports=r()}).call(this,n(4),n(3))},function(t,e,n){"use strict";n.r(e),n.d(e,"Headers",function(){return c}),n.d(e,"Request",function(){return m}),n.d(e,"Response",function(){return b}),n.d(e,"DOMException",function(){return w}),n.d(e,"fetch",function(){return _});var r={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};if(r.arrayBuffer)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],i=ArrayBuffer.isView||function(t){return t&&o.indexOf(Object.prototype.toString.call(t))>-1};function s(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function a(t){return"string"!=typeof t&&(t=String(t)),t}function u(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return r.iterable&&(e[Symbol.iterator]=function(){return e}),e}function c(t){this.map={},t instanceof c?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function f(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function d(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function l(t){var e=new FileReader,n=d(e);return e.readAsArrayBuffer(t),n}function h(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function p(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:r.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:r.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:r.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():r.arrayBuffer&&r.blob&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=h(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||i(t))?this._bodyArrayBuffer=h(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var t=f(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?f(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(l)}),this.text=function(){var t,e,n,r=f(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=d(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}c.prototype.append=function(t,e){t=s(t),e=a(e);var n=this.map[t];this.map[t]=n?n+", "+e:e},c.prototype.delete=function(t){delete this.map[s(t)]},c.prototype.get=function(t){return t=s(t),this.has(t)?this.map[t]:null},c.prototype.has=function(t){return this.map.hasOwnProperty(s(t))},c.prototype.set=function(t,e){this.map[s(t)]=a(e)},c.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},c.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),u(t)},c.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),u(t)},c.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),u(t)},r.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function m(t,e){var n,r,o=(e=e||{}).body;if(t instanceof m){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new c(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,o||null==t._bodyInit||(o=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new c(e.headers)),this.method=(n=e.method||this.method||"GET",r=n.toUpperCase(),y.indexOf(r)>-1?r:n),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function v(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(o))}}),e}function b(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new c(e.headers),this.url=e.url||"",this._initBody(t)}m.prototype.clone=function(){return new m(this,{body:this._bodyInit})},p.call(m.prototype),p.call(b.prototype),b.prototype.clone=function(){return new b(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},b.error=function(){var t=new b(null,{status:0,statusText:""});return t.type="error",t};var g=[301,302,303,307,308];b.redirect=function(t,e){if(-1===g.indexOf(e))throw new RangeError("Invalid status code");return new b(null,{status:e,headers:{location:t}})};var w=self.DOMException;try{new w}catch(t){(w=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack}).prototype=Object.create(Error.prototype),w.prototype.constructor=w}function _(t,e){return new Promise(function(n,o){var i=new m(t,e);if(i.signal&&i.signal.aborted)return o(new w("Aborted","AbortError"));var s=new XMLHttpRequest;function a(){s.abort()}s.onload=function(){var t,e,r={status:s.status,statusText:s.statusText,headers:(t=s.getAllResponseHeaders()||"",e=new c,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var n=t.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();e.append(r,o)}}),e)};r.url="responseURL"in s?s.responseURL:r.headers.get("X-Request-URL");var o="response"in s?s.response:s.responseText;n(new b(o,r))},s.onerror=function(){o(new TypeError("Network request failed"))},s.ontimeout=function(){o(new TypeError("Network request failed"))},s.onabort=function(){o(new w("Aborted","AbortError"))},s.open(i.method,i.url,!0),"include"===i.credentials?s.withCredentials=!0:"omit"===i.credentials&&(s.withCredentials=!1),"responseType"in s&&r.blob&&(s.responseType="blob"),i.headers.forEach(function(t,e){s.setRequestHeader(e,t)}),i.signal&&(i.signal.addEventListener("abort",a),s.onreadystatechange=function(){4===s.readyState&&i.signal.removeEventListener("abort",a)}),s.send(void 0===i._bodyInit?null:i._bodyInit)})}_.polyfill=!0,self.fetch||(self.fetch=_,self.Headers=c,self.Request=m,self.Response=b)},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){var n,r,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(t){n=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u,c=[],f=!1,d=-1;function l(){f&&u&&(f=!1,u.length?c=u.concat(c):d=-1,c.length&&h())}function h(){if(!f){var t=a(l);f=!0;for(var e=c.length;e;){for(u=c,c=[];++d<e;)u&&u[d].run();d=-1,e=c.length}u=null,f=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function y(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new p(t,e)),1!==c.length||f||a(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,n){"use strict";e.a=function(t){var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){return e.reject(n)})})}},function(t,e,n){"use strict";(function(t){var e=n(5),r=setTimeout;function o(){}function i(t){if(!(this instanceof i))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(t,this)}function s(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,i._immediateFn(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var r;try{r=n(t._value)}catch(t){return void u(e.promise,t)}a(e.promise,r)}else(1===t._state?a:u)(e.promise,t._value)})):t._deferreds.push(e)}function a(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof i)return t._state=3,t._value=e,void c(t);if("function"==typeof n)return void d((r=n,o=e,function(){r.apply(o,arguments)}),t)}t._state=1,t._value=e,c(t)}catch(e){u(t,e)}var r,o}function u(t,e){t._state=2,t._value=e,c(t)}function c(t){2===t._state&&0===t._deferreds.length&&i._immediateFn(function(){t._handled||i._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)s(t,t._deferreds[e]);t._deferreds=null}function f(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function d(t,e){var n=!1;try{t(function(t){n||(n=!0,a(e,t))},function(t){n||(n=!0,u(e,t))})}catch(t){if(n)return;n=!0,u(e,t)}}i.prototype.catch=function(t){return this.then(null,t)},i.prototype.then=function(t,e){var n=new this.constructor(o);return s(this,new f(t,e,n)),n},i.prototype.finally=e.a,i.all=function(t){return new i(function(e,n){if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var o=r.length;function i(t,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,function(e){i(t,e)},n)}r[t]=s,0==--o&&e(r)}catch(t){n(t)}}for(var s=0;s<r.length;s++)i(s,r[s])})},i.resolve=function(t){return t&&"object"==typeof t&&t.constructor===i?t:new i(function(e){e(t)})},i.reject=function(t){return new i(function(e,n){n(t)})},i.race=function(t){return new i(function(e,n){for(var r=0,o=t.length;r<o;r++)t[r].then(e,n)})},i._immediateFn="function"==typeof t&&function(e){t(e)}||function(t){r(t,0)},i._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)}}).call(this,n(7).setImmediate)},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function i(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new i(o.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new i(o.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(8),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(3))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,o,i,s,a,u=1,c={},f=!1,d=t.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(t);l=l&&l.setTimeout?l:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick(function(){p(t)})}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((i=new MessageChannel).port1.onmessage=function(t){p(t.data)},r=function(t){i.port2.postMessage(t)}):d&&"onreadystatechange"in d.createElement("script")?(o=d.documentElement,r=function(t){var e=d.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,o.removeChild(e),e=null},o.appendChild(e)}):r=function(t){setTimeout(p,0,t)}:(s="setImmediate$"+Math.random()+"$",a=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(s)&&p(+e.data.slice(s.length))},t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),r=function(e){t.postMessage(s+e,"*")}),l.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var o={callback:t,args:e};return c[u]=o,r(u),u++},l.clearImmediate=h}function h(t){delete c[t]}function p(t){if(f)setTimeout(p,0,t);else{var e=c[t];if(e){f=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}(e)}finally{h(t),f=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(3),n(4))},function(t,e,n){"use strict";n.r(e);var r="https://chat.rogers.com",o="qa",i="prod",s="fido",a="rogers",u=function(t,e){var n=location.hostname;switch(!0){case-1!==n.indexOf(s,0):t=s,e=n.match("www.fido.ca")?i:o;break;case-1!==n.indexOf(a,0):t=a,e=n.match("www.rogers.com")?i:o;break;default:t=s,e=o}return{getEnvCode:function(){return e},getDomainCode:function(){return t},getConfigUrl:function(){return r+"/liveChat/"+t+"_config.json"},getAccountNumber:function(){return this.accountNumber},setAccountNumber:function(t){this.accountNumber=t},getApplicationId:function(){return t===a?"Rogers.com":"Fido.ca"},getCurrentLang:function(){return document.cookie.replace(/(?:(?:^|.*;\s*)language\s*=\s*([^;]*).*$)|^.*$/,"$1")}}}(),c=n(1),f=(n(2),n(0)),d=n.n(f);Object(c.polyfill)();var l=function(){var t=!1;function e(){var e=decodeURIComponent(document.cookie.replace(/(?:(?:^|.*;\s*)userInfo\s*=\s*([^;]*).*$)|^.*$/,"$1")),n=e&&""!==e?JSON.parse(e).selectedAccountNumber:null;return d()("/pages/api/selfserve/v2/accountOverview",{credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({accountNumber:u.getAccountNumber()||n,language:u.getCurrentLang(),refresh:!1}),method:"POST"}).then(function(t){return t.json()}).then(function(t){var e=t.getAccountInfo.subscriberService[0].service.filter(function(t){return"CTN"===t.serviceName});if(e.length>0)return e[0];throw new Error("CTN not found")}).then(function(t){return d()("/pages/api/selfserve/v1/wireless/liveChat",{method:"POST",credentials:"same-origin",body:JSON.stringify({accountNumber:u.getAccountNumber()||n,ctn:t.subscriberNo,fName:t.firstName,lName:t.lastName,lang:u.getCurrentLang(),lob:"WL"}),headers:{"Content-Type":"application/json"}})}).then(function(t){return t.json()}).then(function(e){var n=function(t,e){e||(e=window.location.href),t=t.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(e);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}("source",e.chatUrl);return t="807"==n||"857"==n,{encryptedName:e.encryptedName,encryptedCtn:e.encryptedCtn,encryptedBan:e.encryptedBan}}).catch(function(t){return""})}return{getEncryptedData:function(){return u.getDomainCode()===a?void 0:e()},getDelinquentStatusFidoCx:function(){return this.getEncryptedData().then(function(){return t})}}}();Object(c.polyfill)();var h=function(){return{getStatus:function(){return u.getDomainCode()===a?(t={applicationId:u.getApplicationId(),accountNumber:u.getAccountNumber()},d()("/web/RogersServices.portal/totes/api/v1/delinquentStatus",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){return t.status})):l.getDelinquentStatusFidoCx();var t}}}();n(6);Object(c.polyfill)();var p=function(){var t="BOLD_CHAT";return{getPermission:function(){return u.getDomainCode()===a?void params:d()("/pages/api/selfserve/v1/permissions",{method:"POST",credentials:"same-origin"}).then(function(t){return!!t.ok&&t.json()}).then(function(e){return!1!==e&&e.permissions.filter(function(e){return e.permission===t}).length>0})}}}(),y=function(){function t(t,e,n,r){this.accountId=t,this.websiteId=e,this.buttonIdMapping=n,this.creditOpsRedirectionExcluded=r,this.encryptedData="",this.lcLoaded=!1,this.delinquentStatus=!1,this.addCreditOpsHiddenButton(),this.bcLoad()}return t.prototype.bcLoad=function(){if(!window.bcLoaded){window.bcLoaded=!0;var t=document.createElement("script");t.type="text/javascript",t.src="//vmss.boldchat.com/aid/"+this.accountId+"/bc.vms4/vms.js",t.async=!0,document.querySelector("head").appendChild(t)}},t.prototype.generateButton=function(t){if(t){var e="bdidVal"in t?t.bdidVal:null,n="divIdVal"in t?t.divIdVal:null,r=this.encryptedData;"vn"in t&&t.vn;window._bcvma=window._bcvma||[],_bcvma.push(["setAccountID",this.accountId]),_bcvma.push(["setParameter","WebsiteID",this.websiteId]),_bcvma.push(["setParameter","CustomUrl",""]),_bcvma.push(["setParameter","WindowParameters","vr=&ve=&vp=&vn=&lc="]),r&&""!==r&&_bcvma.push(["setParameter","SecureParameters",function(t){t(r)}]),_bcvma.push(["addStatic",{type:"chat",bdid:e,id:n}]),window._bcvma.push(["pageViewed"]),window.pageViewer&&pageViewer.load&&pageViewer.load()}},t.prototype.getLcPlaceholderElements=function(){return document.querySelectorAll("[data-lc-btn-placeholder]")},t.prototype.getButtonIdByKey=function(t){return this.buttonIdMapping[t]},t.prototype.getCreditOpsButtonId=function(){var t;switch(u.getCurrentLang()){case"en":t="credit-ops";break;case"fr":t="credit-ops-fr";break;default:t="credit-ops"}return this.buttonIdMapping[t]},t.prototype.addCreditOpsHiddenButton=function(){var t=document.createElement("div");t.style.position="absolute",t.style.width=0,t.style.height=0,t.style.visibility="hidden",this.creditOpsElementId=Math.random(),t.id=this.creditOpsElementId,document.querySelector("body").appendChild(t),this.generateButton({divIdVal:this.creditOpsElementId,bdidVal:this.getCreditOpsButtonId()})},t.prototype.routeButtonsToCreditOps=function(){var t=this.creditOpsElementId;if(this.getLcPlaceholderElements().length<1)setTimeout(function(){this.routeButtonsToCreditOps()}.bind(this),500);else for(var e=this.getLcPlaceholderElements(),n=0;n<e.length;n++)-1===this.creditOpsRedirectionExcluded.indexOf(e[n].dataset.lcBtnPlaceholder)&&e[n].addEventListener("click",function(e){e.stopPropagation(),document.getElementById(t).childNodes[0].click()},!0)},t.prototype.attachIds=function(){var t=this.getLcPlaceholderElements();if(t.length>=0)for(var e=0;e<t.length;e++)if(!t[e].classList.contains("bcStatic")){var n={};n.divIdVal=Math.random(),n.bdidVal=this.getButtonIdByKey(t[e].getAttribute("data-lc-btn-placeholder")),t[e].id=n.divIdVal,t[e].dataset.buttonId=n.bdidVal,t[e].innerHTML="",this.generateButton(n)}},t.prototype.getEncryptedData=function(t){l.getEncryptedData().then(function(e){var n;e&&""!==e?(n={CxA:decodeURIComponent(e.encryptedName||""),CxB:decodeURIComponent(e.encryptedCtn||""),CxC:decodeURIComponent(e.encryptedBan||"")},t(null,n)):t("error getting encrypted data: empty response")}).catch(function(){t("error getting encrypted data: catch block")})},t.prototype.initializeButtons=function(t){var e=this;t||(t={});var n="checkDelinquent"in t&&t.checkDelinquent,r="checkPermission"in t&&t.checkPermission,o="sendEncryptedData"in t&&t.sendEncryptedData,i="accountNumber"in t?t.accountNumber:null;Promise.resolve().then(function(){if(o){if(u.setAccountNumber(i),!i)return;return l.getEncryptedData().then(function(t){t&&""!==t&&(e.encryptedData=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&t[n]&&e.push(n+"="+t[n]);return""!==e.join("&")?e.join("&"):""}({customField_CxA:t.encryptedName,customField_CxB:t.encryptedCtn,customField_CxC:t.encryptedBan}))})}}).then(function(){if(r)return p.getPermission().then(function(t){if(t)return!0;throw new Error("Permission not found")})}).then(function(){e.attachIds()}).then(function(){if(n)return h.getStatus().then(function(t){t&&(e.delinquentStatus=!0,e.routeButtonsToCreditOps())}).catch(function(t){return null})}).then(function(){e.lcLoaded=!0}).catch(function(t){console.log("Error in promise chain of initializeButtons method",t)})},t}();!function(){if(!window.__liveChat){var t=(n={},r=new XMLHttpRequest,o=u.getConfigUrl(),r.onreadystatechange=function(){4===this.readyState&&200===this.status&&(n=JSON.parse(this.responseText)[u.getEnvCode()],e&&e(n))},r.open("GET",o,!0),r.send(),{load:function(t){Object.keys(n).length?t(n):e=t}});window.__liveChat=function(){var e,n;return t.load(function(t){e=new y(t.accountId,t.websiteId,t.buttonIdMapping,t.creditOpsRedirectionExcluded),n&&n(e)}),{getInstance:function(t){e?t(e):n=t}}}()}var e,n,r,o}()}]);
//# sourceMappingURL=lc_integration.js.map